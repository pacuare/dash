{
  "env": [
    ["LOG_FORMAT_JSON", "1"]
  ],
  "phases": [
    {
      "name": "tools",
      "pkgs": ["apk:wget"],
      "commands": [
        "wget -O /bin/tailwindcss https://github.com/tailwindlabs/tailwindcss/releases/latest/download/tailwindcss-linux-x64-musl",
        "chmod +x /bin/tailwindcss"
      ]
    },
    {
      "name": "install",
      "includeFiles": ["go.mod", "go.sum"],
      "commands": [
        "go mod download"
      ]
    },
    {
      "name": "build",
      "pkgs": ["apk:libstdc++", "apk:libgcc"],
      "includeFiles": ["."],
      "commands": [
        "go tool templ generate",
        "tailwindcss -i ./assets/css/input.css -o ./public/output.css",
        "go build -ldflags=\"-w -s\" -o out"
      ]
    }
  ],
  "entrypoint": {
    "includeFiles": ["."],
    "command": "./out"
  }
}
